# Phoenix LiveView Katas history

This file tracks your progress through the Phoenix LiveView Katas.

## Progress Overview
| Kata | Status | Completion Date | Notes |
|------|--------|-----------------|-------|
| 01 - Hello World | Completed | 2025-12-16 | Verified manually |
| 02 - Counter | Completed | 2025-12-16 | Verified manually |
| 03 - The Mirror | Completed | 2025-12-16 | Verified form bindings |
| 04 - The Toggler | Completed | 2025-12-16 | Verified conditional rendering |
| 05 - The Color Picker | Completed | 2025-12-16 | Verified multiple state bindings |
| 06 - The Resizer | Completed | 2025-12-16 | Verified dynamic width/height |
| 07 - The Spoiler | Completed | 2025-12-16 | Verified boolean toggle/CSS blur |
| 08 - The Accordion | Completed | 2025-12-16 | Verified active ID tracking |
| 09 - The Tabs | Completed | 2025-12-16 | Verified tab switching & conditional rendering |
| 10 - Character Counter | Completed | 2025-12-16 | Verified string length & limits |
| 11 - The Stopwatch | Completed | 2025-12-16 | Verified process interval & formatting |
| 12 - The Timer | Completed | 2025-12-16 | Verified countdown & auto-stop |
| 13 - Events Mastery | Completed | 2025-12-16 | Verified logs for focus/blur/key |
| 14 - Keybindings | Completed | 2025-12-16 | Verified global window keys |
| 15 - The Calculator | Completed | 2025-12-16 | Verified complex state logic |
| 16 - The List | Completed | 2025-12-16 | Verified appending items |
| 17 - The Remover | Completed | 2025-12-16 | Verified removal by ID |
| 18 - The Editor | Completed | 2025-12-16 | Verified inline editing |
| 19 - The Filter | Completed | 2025-12-16 | Verified filtering (search) |
| 20 - The Sorter | Completed | 2025-12-16 | Verified sorting by column |
| 21 - The Paginator | Completed | 2025-12-16 | Verified offset-based pagination |
| 22 - The Highlighter | Completed | 2025-12-16 | Verified text highlighting |
| 23 - The Multi-Select | Completed | 2025-12-16 | Verified MapSet selection logic |
| 24 - The Grid | Completed | 2025-12-16 | Verified CSS Grid Responsive Layout |
| 25 - The Tree | Completed | 2025-12-16 | Verified recursive tree rendering |
| 26 - The Text Input | Completed | 2025-12-16 | Verified text input binding |
| 27 - The Checkbox | Completed | 2025-12-16 | Verified checkbox binding |
| 28 - Radio Buttons | Completed | 2025-12-16 | Verified radio button binding |
| 29 - The Select | Completed | 2025-12-16 | Verified select dropdown binding |
| 30 - The Multi-Select Form | Completed | 2025-12-16 | Verified multi-select binding |
| 31 - Dependent Inputs | Completed | 2025-12-16 | Verified dependent inputs |
| 32 - Comparison Validation | Completed | 2025-12-16 | Verified comparison validation |
| 33 - Formats | Completed | 2025-12-16 | Verified formatting |
| 34 - Live Feedback | Completed | 2025-12-16 | Verified live feedback |
| 35 - Form Restoration | Completed | 2025-12-16 | Verified form restoration |
| 36 - Debounce | Completed | 2025-12-16 | Verified debounce |
| 37 - The Wizard | Completed | 2025-12-16 | Verified multi-step form |
| 38 - The Tag Input | Completed | 2025-12-16 | Verified tag input |
| 39 - The Rating Input | Completed | 2025-12-16 | Verified rating input |
| 40 - File Uploads | Completed | 2025-12-16 | Verified file uploads |
| 41 - URL Params | Completed | 2025-12-16 | Verified URL parameters |
| 42 - Path Params | Completed | 2025-12-16 | Verified path parameters |
| 43 - The Nav Bar | Completed | 2025-12-16 | Verified navigation bar |
| 44 - The Breadcrumb | Completed | 2025-12-16 | Verified breadcrumb navigation |
| 45 - Tabs with URL | Completed | 2025-12-16 | Verified tabs with URL state |
| 46 - Search with URL | Completed | 2025-12-16 | Verified search with URL parameters |
| 47 - Protected Routes | Completed | 2025-12-16 | Verified protected routes |
| 48 - Live Redirects | Completed | 2025-12-16 | Verified live redirects |
| 49 - The Translator | Completed | 2025-12-16 | Verified translation functionality |
| 50 - Functional Components | Completed | 2025-12-16 | Verified functional components |

## Infrastructure Updates
| Update | Date | Notes |
|--------|------|-------|
| Layout Refactor | 2025-12-16 | Added Sidebar and Tabbed Viewer (Interactive/Source/Notes) |
| Typography Plugin | 2025-12-16 | Installed @tailwindcss/typography for formatted notes |
| Sidebar Fix | 2025-12-16 | Fixed layout slot issue (inner_block vs inner_content) & added Katas Index |
| 51 - The Card | Completed | 2025-12-16 | UI component with slots |
| 52 - The Button | Completed | 2025-12-16 | Button variants and states |
| 53 - The Icon | Completed | 2025-12-16 | Icon wrapper component |
| 54 - The Modal | Completed | 2025-12-16 | Modal dialog component |
| 55 - The Slide-over | Completed | 2025-12-16 | Drawer component |
| 56 - The Tooltip | Completed | 2025-12-16 | Tooltip component |
| 57 - The Dropdown | Completed | 2025-12-16 | Dropdown menu component |
| 58 - Flash Messages | Completed | 2025-12-16 | Toast notifications |
| 59 - The Skeleton | Completed | 2025-12-16 | Loading placeholders |
| 60 - The Progress Bar | Completed | 2025-12-16 | Progress indicator |
| 61 - Stateful Component | Completed | 2025-12-16 | LiveComponent patterns |
| 62 - Component ID | Completed | 2025-12-16 | Component ID management |
| 63 - Send Update | Completed | 2025-12-16 | Parent-child communication |
| 64 - Send Self | Completed | 2025-12-16 | Self-updating components |
| 65 - Child-to-Parent | Completed | 2025-12-16 | Child-parent messaging |
| 66 - Sibling Communication | Completed | 2025-12-16 | Sibling component communication |
| 67 - Lazy Loading | Completed | 2025-12-16 | Async component loading |
| 68 - Changesets 101 | Completed | 2025-12-16 | Changeset basics |
| 69 - The CRUD | Completed | 2025-12-16 | CRUD operations |
| 70 - Optimistic UI | Completed | 2025-12-16 | Optimistic updates |
| 71 - Streams Basic | Completed | 2025-12-16 | Stream operations |
| 72 - Infinite Scroll | Enhanced | 2025-12-16 | IntersectionObserver hook |
| 73 - Stream Insert/Delete | Completed | 2025-12-16 | Stream manipulation |
| 74 - Stream Reset | Completed | 2025-12-16 | Stream filtering |
| 75 - Bulk Actions | Enhanced | 2025-12-16 | Fixed bulk delete |
| 76 - The Clock | Completed | 2025-12-16 | Server-side intervals |
| 91 - Masked Input | Enhanced | 2025-12-16 | Added InputMask JS hook |
| 88 - Theme Switcher | Enhanced | 2025-12-16 | Session-based theme toggle |
| 89 - Chart.js | Enhanced | 2025-12-16 | Integrated Chart.js via JS Hook |
| 90 - Mapbox | Pending | - | Leaflet.js integration pending |
| 92 - File Dropzone | Completed | 2025-12-16 | Advanced UI with file management |
| 93 - Sortable List | Pending | - | SortableJS integration pending |
| 94 - Audio Player | Enhanced | 2025-12-16 | HTML5 Audio Hook with server controls |
| 95 - Async Assigns | Enhanced | 2025-12-16 | Used assign_async for non-blocking UI |
| 77 - The Ticker | Enhanced | 2025-12-16 | PubSub stock updates |
| 78 - Chat Room | Enhanced | 2025-12-16 | Multi-user PubSub chat |
| 79 - Typing Indicator | Enhanced | 2025-12-16 | PubSub typing events |
| 80 - Presence List | Enhanced | 2025-12-16 | Phoenix.Presence tracking |
| 81 - Live Cursor | Enhanced | 2025-12-16 | Multi-user cursor tracking |
| 96 - File Uploads | Enhanced | 2025-12-16 | Integrated allow_upload & drag-drop |
| 97 - Image Processing | Enhanced | 2025-12-16 | Mogrify (ImageMagick) integration |
| 98 - PDF Generation | Enhanced | 2025-12-16 | PdfGenerator (wkhtmltopdf) integration |
| 99 - CSV Export | Enhanced | 2025-12-16 | NimbleCSV export with download |
| Multi-user Katas | Beta | 2025-12-18 | Login-gated editing, User-specific persistence, "Hot Seat" compilation |

### Phase 4: Use Case - Tasky

| ID | Status | Date | Notes |
|:---|:---|:---|:---|
| Tasky Level 1 | Completed | 2025-12-16 | Basic CRUD (List, Add, Toggle) with Tailwind |
| Tasky Level 2 | Completed | 2025-12-16 | Added Delete Button & Confirmation Modal |
| Tasky Level 3 | Completed | 2025-12-16 | Added Favorites Logic & UI (Star Icon) |
| Tasky Yellow Belt | Completed | 2025-12-16 | Added Pagination & Search (Level 1 & 2) |
| Tasky Orange Belt | Completed | 2025-12-16 | Added Authentication (phx.gen.auth, user scoping) |
| Tasky Green Belt | Completed | 2025-12-16 | Added organization features: categories, priority levels, due dates with filtering and visual indicators |
| Tasky Blue Belt | Completed | 2025-12-18 | Added Subtasks, Comments, and Attachments (Detail Modal) |
| Navigation Refactoring | Completed | 2025-12-16 | Added landing page hub, Use Cases index |

## Recent Session Notes

### 2025-12-16 - Tasky Green Belt Implementation

**Objective**: Add organization features to Tasky (categories, priorities, due dates)

**Changes Made**:

1. **Database Migration**
   - Added `category` (string), `priority` (string, default: "medium"), `due_date` (date) fields to todos table
   - Created indexes for efficient filtering

2. **Schema & Validations**
   - Updated `Todo` schema with new fields
   - Added priority validation (low/medium/high)
   - Added due date validation (cannot be in the past)

3. **Context Functions**
   - Enhanced `list_todos/2` with filtering by category, priority, and due date ranges
   - Added `list_categories/1` for category autocomplete
   - Added `get_overdue_count/1` for overdue task counting

4. **Frontend - Form Inputs**
   - Category input with datalist autocomplete
   - Priority dropdown (Low/Medium/High)
   - Due date picker
   - Submit button for better UX

5. **Frontend - Filter Controls**
   - Category filter dropdown
   - Priority filter dropdown
   - Due date filter (All/Overdue/Today/This Week/No Date)
   - Clear filters button

6. **Frontend - Visual Indicators**
   - Priority badges: Red (High), Yellow (Medium), Green (Low)
   - Category tags: Blue
   - Due date colors: Red (overdue), Orange (today), Blue (this week), Gray (future)
   - Smart date formatting ("Overdue by X days", "Due today", "Due in X days")

7. **Bug Fixes**
   - Fixed category dropdown not updating after task creation
   - Added submit button to form for clarity

**Files Modified**:
- `priv/repo/migrations/20251216173821_add_organization_fields_to_todos.exs`
- `lib/elixir_katas/tasky/todo.ex`
- `lib/elixir_katas/tasky.ex`
- `lib/elixir_katas_web/live/tasky_live/index.ex`

**Commits**:
- `feat: Add category, priority, and due_date fields to Todo schema`
- `feat: Add filtering by category, priority, and due date to Tasky context`
- `feat: Add category, priority, and due date inputs to task form`
- `feat: Add filter controls and event handlers`
- `feat: Add visual indicators for priority, category, and due date`
- `fix: Refresh categories list after creating a task`
- `feat: Add submit button to task form for better UX`

**Next Steps**:
- Blue Belt: Subtasks, attachments, comments
- Purple Belt: Real-time collaboration, task assignment
- Brown Belt: Drag & drop, bulk actions, export/import
- Black Belt: Email notifications, mobile optimization, keyboard shortcuts

### 2025-12-18 - Tasky Blue Belt Implementation

**Objective**: Add deep-dive features to Tasky: Subtasks, Comments, and Attachments.

**Changes Made**:

1. **Database & Schema**
   - Created `Subtask` schema (title, is_complete, todo_id)
   - Created `Comment` schema (content, user_id, todo_id)
   - Created `Attachment` schema (filename, content_type, path, size, todo_id)
   - Updated `Todo` schema with `has_many` associations for all above.

2. **Context**
   - Added CRUD functions for Subtasks, Comments, and Attachments in `Tasky` context.
   - Updated `get_todo!` to preload these associations.

3. **Frontend - Task Detail Modal**
   - Implemented a comprehensive modal view when clicking a task title.
   - **Subtasks**: List view with toggle checkboxes and inline addition form.
   - **Attachments**: File upload support (drag & drop), list view with download/open support, and **image previews**.
   - **Comments**: Comment stream with user email and timestamp.

4. **UX Improvements**
   - **Attachment Previews**: Added logic to display inline previews for image attachments.
   - **Delete Confirmation**: Implemented a generic `confirm_delete` modal that works for both Todos (Tasky Level 2) and Attachments.
   - **Visuals**: Replaced 'x' icon with trash can for deletes; ensuring modal stacking works correctly.

**Files Modified**:
- `priv/repo/migrations/20251218053816_add_blue_belt_tables.exs`
- `lib/elixir_katas/tasky/subtask.ex`, `comment.ex`, `attachment.ex`
- `lib/elixir_katas/tasky.ex`
- `lib/elixir_katas_web/live/tasky_live/index.ex`

**Next Steps**:
- Purple Belt: Real-time collaboration (Presence, Assignments)

### 2025-12-18 - Multi-User Katas & Refactoring

**Objective**: Enable multi-user live editing, ensure stability, and refine Kata UI.

**Changes Made**:

1.  **Multi-User "Hot Seat" Editing**
    - Implemented a "Hot Seat" model where user-specific source code is written to the live file on the server.
    - Added `UserKata` schema and context to persist user edits.
    - Updated `KataLive` to switch between Read-Only (Guest) and Editable (User) modes.

2.  **Stability & Bug Fixes**
    - **Registration Fix**: Added missing password field to `UserLive.Registration` to enable standard auth flow.
    - **Infinite Reload Fix**: Patched `KataLive` to only write to disk if content *differs*, preventing infinite LiveReload loops.
    - **Race Condition Fix**: Updated `CodeEditor` hook (`code_editor.js`) to clear timers on destroy, preventing "ghost saves" from reverting file state.

3.  **Kata 01 Refactoring**
    - Simplified `kata_01_hello_world_live.ex` by removing the static console mockup `div` to declutter the UI.
    - (Note: "Click me" button logic preserved/toggled during experimental refactoring).

**Files Modified**:
- `lib/elixir_katas_web/live/kata_live.ex`
- `lib/elixir_katas/katas/user_kata.ex`
- `assets/js/hooks/code_editor.js`
- `lib/elixir_katas_web/live/user_live/registration.ex`
- `lib/elixir_katas_web/live/kata_01_hello_world_live.ex`

